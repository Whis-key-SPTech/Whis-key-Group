<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="navbar">
    WHI<span style="color: #ffa500">S{</span>KEY<span style="color: #ffa500">}</span>
    <button onclick="calculadora2()">Calculadora de taxa de Angel's Share</button>
    <button onclick="calculadora1()">Calculadora de perda por Angel's Share</button>

    </div>
    <hr>
    <div id="mainPage"></div>
</body>
</html>
<script>

    calculadora2();

    function calculadora1(){
        mainPage.innerHTML = `
        <div id="calculadora1" class="conteudo">
        <h1>Calculadora de perda por Angel's Share</h1>
        <label for="input_barrilQuant">Insira a quantidade de barris em maturação</label><br>
        <input type="number" id="input_barrilQuant"><br><br>
        <label for="input_tamBarril">Insira o tamanho dos barris (LITROS)</label><br>
        <input type="number" id="input_tamBarril"><br><br>
        <label for="input_precoMedio">Insira o preço médio do litro do seu Uísque.</label><br>
        <input type="number" id="input_precoMedio"><br><br>
        <label for="input_angelShare">Insira a taxa de Angel's Share (porcento)</label><br>
        <input type="number" id="input_angelShare"><br><br>
        <label for="input_anos">Insira o tempo da maturação (Anos)</label><br>
        <input type="number" id="input_anos"><br><br>


        <button onclick="getAngelLoss()">Calcular Perda</button><br><br>
        <hr>

        <div id="calc1Mensagem"></div>
        
    </div>`
    }

    function calculadora2(){
        mainPage.innerHTML = 
        `<div id="calculadora2" class="conteudo">
        <h1>Calculadora de taxa de Angel's Share</h1>
        <label for="input_volumeInicial">Insira o volume inicial da sua última produção (L)</label><br>
        <input type="number" id="input_volumeInicial"><br><br>
        <label for="input_volumeFinal">Insira o volume final da sua última produção (L)</label><br>
        <input type="number" id="input_volumeFinal"><br><br>
        <label for="input_anos2">Insira o tempo total da maturação da sua última produção (Anos)</label><br>
        <input type="number" id="input_anos2"><br><br>

        <button onclick="getAngel()">Calcular Angel's Share</button><br><br>
        <button onclick="btt_calcularmelhor()">Calcular Melhor Cenário</button>
        <br><br>
        <hr>

        <div id="calc2Mensagem"></div>
        
        </div>`
    }


    var perda = 0;
    var precoMedio = 0;
    var tamBarril = 0;
    var quantBarril = 0;
    function getAngelLoss(){
        quantBarril = Number(input_barrilQuant.value);
        tamBarril =  Number(input_tamBarril.value);
        var inicial = quantBarril * tamBarril;
        var ratio = Number(input_angelShare.value/100);
        var ano = Number(input_anos.value)
        precoMedio = Number(input_precoMedio.value);
    
       
        var valorFinal = inicial * (1 - ratio) ** ano;
        perda = inicial - valorFinal
        var valorPerda =  perda * precoMedio;
        var perdaBarril = perda / tamBarril;



        calc1Mensagem.innerHTML = `Ao final de ${ano} anos, <b>com suas atuais medidas de temperatura e umidade</b>, dos seus ${inicial} litros iniciais sobrarão aproximadamente ${valorFinal.toFixed(2)} litros,<br>
    o que equivale a um prejuizo de aproximadamente: <br>${perda.toFixed(2)} litros (${((perda * 100) / inicial).toFixed(1)}%),<br> ${perdaBarril.toFixed()} barris<br> ou  ${valorPerda.toLocaleString("pt-BR", {style: "currency", currency: "BRL"})}<br><br>
    <div id="detalhe"></div>`;
    getInfo();
    }

    function getInfo(){
    var ano = Number(input_anos.value)
    var perdaDiaria = (perda / ano) / 365.25;
    var valorDiario = perdaDiaria * precoMedio;

    detalhe.innerHTML = `A sua perda diária aproximada é de: <br>
    ${perdaDiaria.toFixed(2)} litros por evaporação, <br>
    Que resulta num prejuizo diario de ${valorDiario.toLocaleString("pt-BR", {style: "currency", currency: "BRL"})}<br><br>`;
    }

    function getAngel(){
        var volumeInicial = Number(input_volumeInicial.value);
        var volumeFinal = Number(input_volumeFinal.value);
        var ano = Number(input_anos2.value)

        var aShare = (1 - (volumeFinal / volumeInicial) ** (1/ano))*100

        calc2Mensagem.innerHTML = `<br>Com seu cenário atual de umidade e temperatura;<br>
        Sabendo que a produção iniciou com ${volumeInicial} litros e finalizou com ${volumeFinal} litros após ${ano} anos: <br>
        Seu Angel's Share é de aproximadamente <b>${aShare.toFixed(1)}% ao ano.</b><br>`;
        contadorCalc1 = 0;
    }

    var contadorCalc1 = 0
    function btt_calcularmelhor(){
        var volumeInicial = Number(input_volumeInicial.value);
        var volumeFinal = Number(input_volumeFinal.value);
        var anos = Number(input_anos2.value);
        var share = volumeInicial * (1-0.02)**anos

        if(contadorCalc1 < 1){
        calc2Mensagem.innerHTML += `<br>Comparando com um cenário ideal, com<span style="color:green"><b> Angel's Share em 2% ao ano. </span><b> Depois de ${anos} anos você deixaria de perder aproximadamente<br>
        <span style="color:green"><b>${(share - volumeFinal).toFixed(2)}</span> Litros,<b> resultando na uma reserva final de <span style="color:green"><b> ${share.toFixed(2)}</span> litros!`
        contadorCalc1++;
        }

           

    }

</script>